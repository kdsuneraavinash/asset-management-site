<!DOCTYPE html>
<html lang="en">
{% include 'header.htm' %}

<body>
    {% include 'sidenav.htm' %}
    {% import 'dashboard-macros.htm' as macro %}

    <!-- Page Content -->
    <div class="container-fluid main body-content pt-lg-4 pb-5">
        <div class="bg-dark p-4 text-white">
            <h1 class="text-center">Dashboard</h1>
            <br />
            <ul class="nav nav-pills nav-justified" id="pills-tab" role="tablist">
                {{ macro.pill('Activities', 'activities', true) }}
                {{ macro.pill('Preventive', 'preventive', false) }}
                {{ macro.pill('Corrective', 'corrective', false) }}
                {{ macro.pill('Inspection', 'inspection', false) }}
            </ul>
        </div>

        <div class="bg-light content p-2">

            <div class="tab-content pt-2 pl-1" id="pills-tabContent">

                <div class="tab-pane fade show active" id="pills-activities" role="tabpanel" aria-labelledby="pills-activities-tab">
                    {% include('manager-dashboard-activities.htm') with context %}
                </div>
                <div class="tab-pane fade" id="pills-preventive" role="tabpanel" aria-labelledby="pills-preventive-tab">
                    {% include('manager-dashboard-preventive.htm') with context %}
                </div>
                <div class="tab-pane fade" id="pills-corrective" role="tabpanel" aria-labelledby="pills-corrective-tab">
                    {% include('manager-dashboard-preventive.htm') with context %}
                </div>
                <div class="tab-pane fade" id="pills-inspection" role="tabpanel" aria-labelledby="pills-inspection-tab">
                    {% include('manager-dashboard-inspections.htm') with context %}
                </div>
            </div>

        </div>
    </div>

    <script>
        function qrCodeScanned(result) {
            window.location = "labourer-dashboard.html?qr=" + result.code;
        }
    </script>

    {% include('js-loader.htm') %}
    {% include('qrscanner.htm') %}

    <script>
        $(".activity-sel").click(function (v) {
            key = this.id;
            while (key.charAt(key.length - 1) == '-') {
                key = key.substring(0, key.length - 1);
            }
            var targetButtons = $("." + key);
            targetButtons.removeClass('btn-default');
            targetButtons.addClass('btn-light');

            var thisButton = $("#" + this.id).first();
            thisButton.removeClass('btn-light');
            thisButton.addClass('btn-default');

            console.log(thisButton)
        })
    </script>

    <script>
        function setOpacity(accepted, index) {
            if (accepted) {
                $('#preventive-' + index).val('accept');
                $('#preventive-' + index + '-accept').css('opacity', '1');
                $('#preventive-' + index + '-decline').css('opacity', '0.5');
            } else {
                $('#preventive-' + index).val('decline');
                $('#preventive-' + index + '-accept').css('opacity', '0.5');
                $('#preventive-' + index + '-decline').css('opacity', '1');

            }
        }
    </script>
    
</body>

</html>